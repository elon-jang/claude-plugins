# Spark Init - Initialize Knowledge Repository

Initialize a new directory as a Sparks knowledge repository with the recommended structure.

## Options

- `[directory]` - Target directory (default: current directory)

## Workflow

### 0. Check Current Directory

```bash
pwd
```

### 1. Confirm Initialization

```json
{
  "questions": [
    {
      "question": "Initialize Sparks knowledge repository in:\n{directory}\n\nThis will create the recommended folder structure.",
      "header": "Confirm",
      "multiSelect": false,
      "options": [
        {"label": "Yes, initialize", "description": "Create Sparks structure"},
        {"label": "Cancel", "description": "Abort initialization"}
      ]
    }
  ]
}
```

### 2. Check if Already Initialized

```bash
ls -la .sparks 2>/dev/null
```

If `.sparks` directory exists:
```
Warning: This directory already has a Sparks configuration.
Do you want to reset it?
```

### 3. Create Directory Structure

```bash
mkdir -p concepts insights skills til .sparks
```

### 4. Create Config File

**Path**: `.sparks/config.json`

```json
{
  "version": "1.0.0",
  "categories": ["concepts", "insights", "skills", "til"],
  "defaultCategory": "insights",
  "leitnerIntervals": [1, 3, 7, 14, 30],
  "socraticLevels": 5,
  "autoConnectThreshold": 0.3
}
```

### 5. Create Progress File

**Path**: `.sparks/progress.json`

```json
{}
```

### 6. Create .gitignore

**Path**: `.gitignore`

```
# Sparks local files
.sparks/progress.json

# OS
.DS_Store
Thumbs.db

# Editor
*.swp
*.swo
*~
.idea/
.vscode/
```

### 7. Create README.md

**Path**: `README.md`

```markdown
# My Sparks

Personal knowledge repository managed with [Sparks](https://github.com/elon-jang/claude-plugins/tree/main/plugins/sparks) plugin.

## Categories

### Concepts

이론, 원리, 개념

<!-- spark-index:concepts -->

### Insights

경험에서 얻은 깨달음

<!-- spark-index:insights -->

### Skills

실용 기술, How-to

<!-- spark-index:skills -->

### TIL (Today I Learned)

일일 학습 기록

<!-- spark-index:til -->

## Stats

- Total items: 0
- Last updated: {date}

---

*Generated by [Sparks](https://github.com/elon-jang/claude-plugins/tree/main/plugins/sparks)*
```

### 8. Initialize Git (if not already)

```bash
git rev-parse --show-toplevel 2>/dev/null || git init
```

### 9. Initial Commit

```json
{
  "questions": [
    {
      "question": "Create initial Git commit?",
      "header": "Git Commit",
      "multiSelect": false,
      "options": [
        {"label": "Yes, commit", "description": "git add . && git commit"},
        {"label": "No, skip", "description": "I'll commit manually"}
      ]
    }
  ]
}
```

If yes:
```bash
git add .
git commit -m "Initialize Sparks knowledge repository"
```

### 10. Success Message

```
Sparks repository initialized!

Structure created:
{directory}/
  .sparks/
    config.json
    progress.json (gitignored)
  concepts/
  insights/
  skills/
  til/
  .gitignore
  README.md

Next steps:
1. Add your first knowledge: /spark add
2. Start learning: /spark learn
3. Push to GitHub: git remote add origin <url> && git push -u origin main
```

## Error Handling

- **Directory doesn't exist**: Create it with confirmation
- **No write permission**: Show error message
- **Already initialized**: Ask to reset or cancel
- **Git not installed**: Skip Git operations, show warning
